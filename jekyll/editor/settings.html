---
layout: editor
title: settings
---


<h1>Advanced JSON Editor Example</h1>

<p>This example demonstrates the following:</p>
<ul>
  <li>Loading external schemas via ajax (using $ref)</li>
  <li>Setting the editor's value from javascript (try the Restore to Default button)</li>
  <li>Validating the editor's contents (try setting name to an empty string)</li>
  <li>Macro templates (try changing the city or state fields and watch the citystate field update automatically)</li>
  <li>Enabling and disabling editor fields</li>
</ul>

<div class="mdc-dialog mdc-dialog--scrollable"
     role="alertdialog"
     aria-modal="true"
     aria-labelledby="my-dialog-title"
     aria-describedby="my-dialog-content">
  <div class="mdc-dialog__container">
    <div class="mdc-dialog__surface">
      <!-- Title cannot contain leading whitespace due to mdc-typography-baseline-top() -->
      <h2 class="mdc-dialog__title" id="my-dialog-title">
        Edit {{ page.title }}
       </h2>
      <div class="mdc-dialog__content" id="editor-{{ page.title }}"  >

        <button id='submit'>Submit (console.log)</button>
        <button id='restore'>Restore to Default</button>
        <button id='enable_disable'>Disable/Enable Form</button>
        <span id='valid_indicator'></span>

      </div>
      <footer class="mdc-dialog__actions">
        <button type="button" class="mdc-button mdc-dialog__button" data-mdc-dialog-action="closed" id="dialog-cancel">
          <span class="mdc-button__label">cancel</span>
        </button>
        <button type="button" class="mdc-button mdc-dialog__button dialog-editor-save"   id="dialog-confirm">
          <span class="mdc-button__label">Save</span>
        </button>
      </footer>
    </div>
  </div>
  <div class="mdc-dialog__scrim"></div>
</div>

<button class="mdc-button dialog-editor"> Edit Page </button>

<!-- JSONEditor is not defined -->
<script src="/webpack/vendor/jsoneditor.js"></script>
<script>
  // This is the starting value for the editor
  // We will use this to seed the initial editor
  // and to provide a "Restore to Default" button.
  var starting_value = [
    {
      name: "John Smith",
      age: 35,
      gender: "male",
      location: {
        city: "San Francisco",
        state: "California",
        citystate: ""
      },
      pets: [
        {
          name: "Spot",
          type: "dog",
          fixed: true
        },
        {
          name: "Whiskers",
          type: "cat",
          fixed: false
        }
      ]
    }
  ];

  var element = document.getElementById('editor-{{ page.title }}');

  // Initialize the editor
  var options = {
    // Enable fetching schemas via ajax
    ajax: true,
    theme: 'barebones',
    template: 'ejs',

    // The schema for the editor
    schema: {
      type: "array",
      title: "People",
      format: "tabs",
      items: {
        title: "Person",
        headerTemplate: "{{i}} - {{self.name}}",
        oneOf: [
          {
            $ref: "basic_person.json",
            title: "Basic Person"
          },
          {
            $ref: "person.json",
            title: "Complex Person"
          }
        ]
      }
    },
    // Seed the form with a starting value
    startval: starting_value,
    // Disable additional properties
    no_additional_properties: true,
    // Require all properties by default
    required_by_default: true
  };


  var editor = new JSONEditor(element, options);

  // Hook up the submit button to log to the console
  document.getElementById('submit').addEventListener('click',function() {
    // Get the value from the editor
    console.log(editor.getValue());
  });

  // Hook up the Restore to Default button
  document.getElementById('restore').addEventListener('click',function() {
    editor.setValue(starting_value);
  });

  // Hook up the enable/disable button
  document.getElementById('enable_disable').addEventListener('click',function() {
    // Enable form
    if(!editor.isEnabled()) {
      editor.enable();
    }
    // Disable form
    else {
      editor.disable();
    }
  });

  // Hook up the validation indicator to update its
  // status whenever the editor changes
  editor.on('change',function() {
    // Get an array of errors from the validator
    var errors = editor.validate();

    var indicator = document.getElementById('valid_indicator');

    // Not valid
    if(errors.length) {
      indicator.style.color = 'red';
      indicator.textContent = "not valid";
    }
    // Valid
    else {
      indicator.style.color = 'green';
      indicator.textContent = "valid";
    }
  });
</script>
